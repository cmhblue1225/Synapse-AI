# 🚀 12. 프로덕션 배포

## 🌐 Netlify 배포 아키텍처

```
GitHub Repository (main branch)
         │ git push
         ▼
   Netlify Build Service
   • npm ci --legacy-peer-deps
   • npm run build (Vite)
   • 환경 변수 주입
         │
         ▼
    Global CDN (dist/)
   • HTTPS 자동 적용
   • 보안 헤더 설정
         │
         ▼
 https://synapse-doc.netlify.app
```

---

## 🛠️ 배포 중 해결한 문제들

### 1. 의존성 충돌 (zod v4 vs OpenAI)

**문제**: `npm error ERESOLVE could not resolve`
**해결**: zod를 v3.23.8로 다운그레이드

### 2. Node.js 버전

**문제**: Vite 7.x가 Node 20 이상 요구
**해결**: `netlify.toml`에서 `NODE_VERSION = "20"` 설정

### 3. 빌드 도구 누락

**문제**: `sh: 1: vite: not found`
**해결**: vite, typescript를 devDependencies → dependencies로 이동

---

## 📝 netlify.toml

```toml
[build]
  command = "npm ci --legacy-peer-deps && npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "20"
  NPM_FLAGS = "--legacy-peer-deps"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

---

## 💡 면접 포인트

### "Netlify 배포 중 가장 어려웠던 문제는?"
> "**의존성 충돌** (zod v4 vs OpenAI)이었습니다. zod v3.23.8로 다운그레이드하고, 빌드 도구를 dependencies로 이동하여 해결했습니다."

---

**다음 문서**: [13. 면접 대비 Q&A](./13_면접_대비_QnA.md)
**이전 문서**: [11. 보안 구현](./11_보안_구현.md)
