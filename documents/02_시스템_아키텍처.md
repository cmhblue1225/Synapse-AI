# ğŸ—ï¸ 02. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

## ğŸ“ ì „ì²´ ì•„í‚¤í…ì²˜ ê°œìš”

SynapseëŠ” **ì„œë²„ë¦¬ìŠ¤ 3-Tier ì•„í‚¤í…ì²˜**ë¥¼ ì±„íƒí•˜ì—¬ í™•ì¥ ê°€ëŠ¥í•˜ê³  ë¹„ìš© íš¨ìœ¨ì ì¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                        â”‚
â”‚        React 19 + TypeScript + TailwindCSS (SPA)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Dashboard  â”‚   Knowledge  â”‚   Search   â”‚   AI Chat    â”‚ â”‚
â”‚  â”‚    Pages    â”‚  Management  â”‚   Pages    â”‚    Pages     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        Zustand (Client State) + React Query (Server)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application Layer                         â”‚
â”‚            Supabase (Backend as a Service)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Authenticationâ”‚   Realtime   â”‚   Storage (S3-like)     â”‚ â”‚
â”‚  â”‚     (JWT)     â”‚  (WebSocket) â”‚   (File Uploads)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         Edge Functions (Deno Runtime)                    â”‚ â”‚
â”‚  â”‚  â€¢ extract-pdf-text: PDF í…ìŠ¤íŠ¸ ì¶”ì¶œ                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Data Layer                              â”‚
â”‚            PostgreSQL 15 + pgvector 0.5.0                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ knowledge_nodes  â”‚  relationships   â”‚  study_sessions â”‚ â”‚
â”‚  â”‚  (VECTOR 1536)   â”‚   (graph data)   â”‚  (í•™ìŠµ ì¶”ì )    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           Row Level Security (RLS) + Indexes               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AI Services Layer                        â”‚
â”‚                    OpenAI API v4                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  GPT-4o-mini: ìš”ì•½, íƒœê·¸ ìƒì„±, í€´ì¦ˆ, ì±„íŒ…              â”‚ â”‚
â”‚  â”‚  text-embedding-3-small: ë²¡í„° ì„ë² ë”© (1536ì°¨ì›)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Presentation Layer (í”„ë¡ íŠ¸ì—”ë“œ)

### ì±…ì„ê³¼ ì—­í• 

**ì±…ì„**:
- ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ë Œë”ë§
- ì‚¬ìš©ì ì…ë ¥ ë° ì´ë²¤íŠ¸ ì²˜ë¦¬
- í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ìƒíƒœ ê´€ë¦¬
- API í˜¸ì¶œ ë° ë°ì´í„° ìºì‹±

**í•µì‹¬ ê¸°ìˆ **:
- **React 19.1.1**: ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ UI
- **TypeScript 5.8.3**: íƒ€ì… ì•ˆì „ì„±
- **Vite 7.1.2**: ë¹ ë¥¸ ê°œë°œ ì„œë²„ ë° ë¹Œë“œ
- **TailwindCSS 3.4.17**: ìœ í‹¸ë¦¬í‹° í¼ìŠ¤íŠ¸ CSS

### ì£¼ìš” í˜ì´ì§€ êµ¬ì¡°

```typescript
// src/App.tsx - ë¼ìš°íŒ… êµ¬ì¡°
const router = createBrowserRouter([
  {
    path: '/',
    element: <Layout />,
    children: [
      { index: true, element: <HomePage /> },
      { path: 'app', children: [
        { path: 'dashboard', element: <DashboardPage /> },
        { path: 'knowledge', element: <KnowledgePage /> },
        { path: 'knowledge/create', element: <CreateNodePage /> },
        { path: 'knowledge/:nodeId', element: <NodeDetailPage /> },
        { path: 'search', element: <SearchPage /> },
        { path: 'graph', element: <GraphPage /> },
        { path: 'ai-chat', element: <AIChatPage /> },
        { path: 'study', children: [
          { path: 'quiz', element: <QuizPage /> },
          { path: 'flashcards', element: <FlashcardsPage /> },
        ]},
      ]},
    ]
  }
]);
```

### ìƒíƒœ ê´€ë¦¬ ì•„í‚¤í…ì²˜

**Zustand (í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ)**:
```typescript
// src/stores/knowledge.store.ts
interface KnowledgeState {
  nodes: KnowledgeNode[];           // ë¡œì»¬ ë…¸ë“œ ìºì‹œ
  selectedNode: KnowledgeNode | null;
  filters: FilterOptions;
  setNodes: (nodes: KnowledgeNode[]) => void;
  updateNode: (id: string, updates: Partial<KnowledgeNode>) => void;
}
```

**React Query (ì„œë²„ ìƒíƒœ)**:
```typescript
// staleTime: 5ë¶„ - ë°ì´í„°ê°€ 5ë¶„ê°„ fresh
// gcTime: 10ë¶„ - ë©”ëª¨ë¦¬ì— 10ë¶„ê°„ ë³´ê´€
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000,
      gcTime: 10 * 60 * 1000,
      refetchOnWindowFocus: false,
    },
  },
});
```

---

## ğŸš€ Application Layer (Supabase)

### Supabase ì•„í‚¤í…ì²˜

SupabaseëŠ” **PostgreSQL ìœ„ì— êµ¬ì¶•ëœ ì˜¤í”ˆì†ŒìŠ¤ Firebase ëŒ€ì•ˆ**ìœ¼ë¡œ, ë‹¤ìŒ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Supabase Platform                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Auth     â”‚ Realtime â”‚   Storage      â”‚ â”‚
â”‚  â”‚   (JWT)    â”‚   (WS)   â”‚   (S3-like)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      PostgreSQL 15 + pgvector          â”‚ â”‚
â”‚  â”‚   (Row Level Security + Extensions)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       Edge Functions (Deno)            â”‚ â”‚
â”‚  â”‚   (Serverless Functions on the Edge)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. Authentication (ì¸ì¦)

**ê¸°ìˆ **: Supabase Auth (JWT ê¸°ë°˜)

```typescript
// src/services/auth.service.ts
class AuthService {
  async login(email: string, password: string) {
    const { data, error } = await supabase.auth.signInWithPassword({
      email,
      password,
    });

    // JWT í† í° ìë™ ì €ì¥ (localStorage)
    // ë§Œë£Œ ì‹œ ìë™ ê°±ì‹ 
  }

  async getCurrentUser() {
    const { data: { user } } = await supabase.auth.getUser();
    return user;  // { id, email, user_metadata }
  }
}
```

**JWT í† í° êµ¬ì¡°**:
```json
{
  "sub": "user_id_uuid",
  "email": "user@example.com",
  "role": "authenticated",
  "iat": 1705734000,
  "exp": 1705820400
}
```

### 2. Realtime (ì‹¤ì‹œê°„ ë™ê¸°í™”)

**ê¸°ìˆ **: WebSocket ê¸°ë°˜ PostgreSQL ë³€ê²½ ê°ì§€

```typescript
// src/hooks/useRealtimeNodes.ts
useEffect(() => {
  const channel = supabase
    .channel('knowledge_nodes_changes')
    .on('postgres_changes', {
      event: '*',  // INSERT, UPDATE, DELETE
      schema: 'public',
      table: 'knowledge_nodes',
      filter: `user_id=eq.${user?.id}`
    }, (payload) => {
      console.log('ì‹¤ì‹œê°„ ë³€ê²½:', payload);
      // React Query ìºì‹œ ë¬´íš¨í™”
      queryClient.invalidateQueries({ queryKey: ['nodes'] });
    })
    .subscribe();

  return () => {
    supabase.removeChannel(channel);
  };
}, [user?.id]);
```

### 3. Storage (íŒŒì¼ ì €ì¥ì†Œ)

**ê¸°ìˆ **: S3-compatible ê°ì²´ ìŠ¤í† ë¦¬ì§€

```typescript
// src/services/storage.service.ts
class StorageService {
  async uploadFile(file: File, userId: string): Promise<string> {
    const fileName = `${Date.now()}_${file.name}`;
    const filePath = `${userId}/${fileName}`;

    const { data, error } = await supabase.storage
      .from('knowledge-files')  // ë²„í‚· ì´ë¦„
      .upload(filePath, file, {
        cacheControl: '3600',
        upsert: false
      });

    // ê³µê°œ URL ë°˜í™˜
    const { data: { publicUrl } } = supabase.storage
      .from('knowledge-files')
      .getPublicUrl(filePath);

    return publicUrl;
  }
}
```

### 4. Edge Functions

**ê¸°ìˆ **: Deno ëŸ°íƒ€ì„ (TypeScript ë„¤ì´í‹°ë¸Œ)

```typescript
// supabase/functions/extract-pdf-text/index.ts
import pdf from "npm:pdf-parse@1.1.1"

Deno.serve(async (req) => {
  // CORS í—¤ë”
  if (req.method === 'OPTIONS') {
    return new Response('ok', { headers: corsHeaders });
  }

  // Base64 PDF ë°ì´í„° ìˆ˜ì‹ 
  const { fileData, fileName } = await req.json();

  // PDF íŒŒì‹±
  const buffer = Uint8Array.from(atob(fileData), c => c.charCodeAt(0));
  const data = await pdf(buffer);

  return new Response(JSON.stringify({
    text: data.text,
    pageCount: data.numpages
  }), { headers: corsHeaders });
});
```

**ë°°í¬**:
```bash
# Edge Function ë°°í¬
supabase functions deploy extract-pdf-text
```

---

## ğŸ’¾ Data Layer (PostgreSQL + pgvector)

### PostgreSQL 15 + Extensions

```sql
-- í•„ìˆ˜ í™•ì¥ í™œì„±í™”
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";      -- UUID ìƒì„±
CREATE EXTENSION IF NOT EXISTS "pgvector";       -- ë²¡í„° ê²€ìƒ‰
CREATE EXTENSION IF NOT EXISTS "pg_trgm";        -- í…ìŠ¤íŠ¸ ìœ ì‚¬ë„
```

### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìš”ì•½

```
knowledge_nodes (ì§€ì‹ ë…¸ë“œ)
â”œâ”€â”€ id: UUID
â”œâ”€â”€ user_id: UUID â†’ auth.users(id)
â”œâ”€â”€ title: TEXT
â”œâ”€â”€ content: TEXT
â”œâ”€â”€ embedding: VECTOR(1536)  â† í•µì‹¬!
â”œâ”€â”€ tags: TEXT[]
â”œâ”€â”€ metadata: JSONB
â””â”€â”€ timestamps

knowledge_relationships (ê´€ê³„)
â”œâ”€â”€ source_node_id: UUID â†’ knowledge_nodes(id)
â”œâ”€â”€ target_node_id: UUID â†’ knowledge_nodes(id)
â”œâ”€â”€ relationship_type: TEXT
â”œâ”€â”€ confidence: DECIMAL
â””â”€â”€ metadata: JSONB

study_sessions (í•™ìŠµ ì„¸ì…˜)
â”œâ”€â”€ user_id: UUID
â”œâ”€â”€ session_type: TEXT
â”œâ”€â”€ node_ids: UUID[]
â”œâ”€â”€ progress: INTEGER
â””â”€â”€ session_data: JSONB
```

### Row Level Security (RLS)

```sql
-- ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë…¸ë“œë§Œ ì ‘ê·¼
CREATE POLICY "Users can manage own nodes"
ON knowledge_nodes FOR ALL
USING (auth.uid() = user_id OR is_public = true);

-- ê´€ê³„ëŠ” ë¶€ëª¨ ë…¸ë“œ ê¶Œí•œ ìƒì†
CREATE POLICY "Users can manage own relationships"
ON knowledge_relationships FOR ALL
USING (
  EXISTS (
    SELECT 1 FROM knowledge_nodes kn
    WHERE (kn.id = source_node_id OR kn.id = target_node_id)
    AND kn.user_id = auth.uid()
  )
);
```

---

## ğŸ¤– AI Services Layer (OpenAI API)

### API í†µí•© ì•„í‚¤í…ì²˜

```typescript
// src/services/ai.service.ts
const openai = new OpenAI({
  apiKey: import.meta.env.VITE_OPENAI_API_KEY,
  dangerouslyAllowBrowser: true  // í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ (ê°œë°œìš©)
});
```

### AI ì„œë¹„ìŠ¤ íë¦„

```
ì‚¬ìš©ì ì…ë ¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬       â”‚
â”‚  - HTML ì œê±°            â”‚
â”‚  - ê¸¸ì´ ì œí•œ (6000ì)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. OpenAI API í˜¸ì¶œ     â”‚
â”‚  - ëª¨ë¸ ì„ íƒ            â”‚
â”‚  - temperature ì„¤ì •     â”‚
â”‚  - max_tokens ì„¤ì •      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. ì‘ë‹µ í›„ì²˜ë¦¬         â”‚
â”‚  - JSON íŒŒì‹±            â”‚
â”‚  - ì—ëŸ¬ ì²˜ë¦¬            â”‚
â”‚  - ì¬ì‹œë„ ë¡œì§          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
  ìµœì¢… ê²°ê³¼
```

---

## ğŸ”„ ì£¼ìš” ë°ì´í„° íë¦„

### 1. ì§€ì‹ ë…¸ë“œ ìƒì„± íë¦„

```
ì‚¬ìš©ìê°€ "ë…¸ë“œ ìƒì„±" í´ë¦­
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CreateNodePage.tsx          â”‚
â”‚ - ì œëª©, ë‚´ìš© ì…ë ¥           â”‚
â”‚ - íŒŒì¼ ì—…ë¡œë“œ (ë“œë˜ê·¸ì•¤ë“œë¡­)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FileTextExtractor           â”‚
â”‚ - PDF â†’ Edge Function í˜¸ì¶œ  â”‚
â”‚ - TXT, MD â†’ í´ë¼ì´ì–¸íŠ¸ ì²˜ë¦¬ â”‚
â”‚ â†’ í…ìŠ¤íŠ¸ ì¶”ì¶œ ì™„ë£Œ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AIService.summarizeFile()   â”‚
â”‚ - GPT-4o-mini ìš”ì•½ ìƒì„±     â”‚
â”‚ - temperature 0.5           â”‚
â”‚ - max_tokens 200            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KnowledgeService.createNode()â”‚
â”‚ - Supabase INSERT           â”‚
â”‚ - íŒŒì¼ URL ë° ìš”ì•½ ì €ì¥     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EmbeddingService            â”‚
â”‚ - ì œëª©+ë‚´ìš©+íŒŒì¼ ê²°í•©       â”‚
â”‚ - OpenAI embedding ìƒì„±     â”‚
â”‚ - PostgreSQL VECTOR ì €ì¥    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìë™ ë§í¬ ìƒì„±              â”‚
â”‚ - findSimilarNodes(0.6)    â”‚
â”‚ - ìƒìœ„ 10ê°œ ìë™ ì—°ê²°      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
  ë…¸ë“œ ìƒì„± ì™„ë£Œ + í† ìŠ¤íŠ¸ ë©”ì‹œì§€
```

### 2. RAG ì±„íŒ… íë¦„

```
ì‚¬ìš©ìê°€ ì§ˆë¬¸ ì…ë ¥ "React 19ì˜ ìƒˆ ê¸°ëŠ¥ì€?"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ì§ˆë¬¸ ì„ë² ë”© ìƒì„±         â”‚
â”‚ - OpenAI text-embedding     â”‚
â”‚ - 1536ì°¨ì› ë²¡í„°             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ì‹œë§¨í‹± ê²€ìƒ‰              â”‚
â”‚ - pgvector ì½”ì‚¬ì¸ ìœ ì‚¬ë„    â”‚
â”‚ - threshold 0.3             â”‚
â”‚ - top-3 ë…¸ë“œ ê²€ìƒ‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±            â”‚
â”‚ - 3ê°œ ë…¸ë“œ ë‚´ìš© ê²°í•©        â”‚
â”‚ - ì œëª© + ë‚´ìš© + ì¶œì²˜ ëª…ì‹œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. GPT-4o-mini ë‹µë³€ ìƒì„±    â”‚
â”‚ - temperature 0.7           â”‚
â”‚ - max_tokens 500            â”‚
â”‚ - ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ í¬í•¨      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. ë‹µë³€ + ì¶œì²˜ í‘œì‹œ         â”‚
â”‚ - ë§ˆí¬ë‹¤ìš´ ì œê±°             â”‚
â”‚ - ì‚¬ìš©ëœ ë…¸ë“œ ë§í¬ í‘œì‹œ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
  ì‚¬ìš©ìì—ê²Œ ë‹µë³€ í‘œì‹œ
```

---

## ğŸŒ ë°°í¬ ì•„í‚¤í…ì²˜ (Netlify)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       GitHub Repository              â”‚
â”‚       (main branch)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ git push
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Netlify Build Service          â”‚
â”‚  â€¢ npm ci --legacy-peer-deps         â”‚
â”‚  â€¢ npm run build (Vite)              â”‚
â”‚  â€¢ í™˜ê²½ ë³€ìˆ˜ ì£¼ì…                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      dist/ í´ë” â†’ Netlify CDN       â”‚
â”‚  â€¢ ì „ ì„¸ê³„ ì—£ì§€ ì„œë²„ ë°°í¬            â”‚
â”‚  â€¢ HTTPS ìë™ ì ìš©                   â”‚
â”‚  â€¢ ë³´ì•ˆ í—¤ë” ì„¤ì •                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    https://synapse-doc.netlify.app
```

### netlify.toml ì„¤ì •

```toml
[build]
  command = "npm ci --legacy-peer-deps && npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "20"
  NPM_FLAGS = "--legacy-peer-deps"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    X-XSS-Protection = "1; mode=block"
```

---

## ğŸ’¡ ë©´ì ‘ í¬ì¸íŠ¸

### "ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ ì„ íƒí•œ ì´ìœ ëŠ”?"
> "**ë¹„ìš© íš¨ìœ¨ì„±**ê³¼ **í™•ì¥ì„±**ì…ë‹ˆë‹¤. SupabaseëŠ” PostgreSQL, ì¸ì¦, ìŠ¤í† ë¦¬ì§€ë¥¼ í†µí•© ì œê³µí•˜ê³ , NetlifyëŠ” ê¸€ë¡œë²Œ CDNê³¼ ìë™ CI/CDë¥¼ ì œê³µí•˜ì—¬ ì¸í”„ë¼ ê´€ë¦¬ ë¶€ë‹´ì„ ì¤„ì˜€ìŠµë‹ˆë‹¤. ì‚¬ìš©ëŸ‰ì— ë”°ë¼ ìë™ìœ¼ë¡œ ìŠ¤ì¼€ì¼ë§ë˜ì–´ íŠ¸ë˜í”½ ê¸‰ì¦ì—ë„ ëŒ€ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."

### "í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ê°„ í†µì‹ ì€ ì–´ë–»ê²Œ ì´ë£¨ì–´ì§€ë‚˜ìš”?"
> "Supabase í´ë¼ì´ì–¸íŠ¸ SDKë¥¼ í†µí•´ **REST API** í˜¸ì¶œê³¼ **WebSocket** ì‹¤ì‹œê°„ êµ¬ë…ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. React Queryë¡œ ì„œë²„ ìƒíƒœë¥¼ ìºì‹±í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ì¤„ì˜€ê³ , staleTime 5ë¶„ìœ¼ë¡œ fresh ë°ì´í„° ìœ ì§€ ì‹œê°„ì„ ìµœì í™”í–ˆìŠµë‹ˆë‹¤."

### "Edge Functionsì„ ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?"
> "í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ì—†ê±°ë‚˜ **ë³´ì•ˆìƒ ë¯¼ê°í•œ ì‘ì—…**ì„ Edge Functionsë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤. PDF í…ìŠ¤íŠ¸ ì¶”ì¶œì€ CSP ë¬¸ì œë¡œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¶ˆê°€ëŠ¥í–ˆê³ , í–¥í›„ OpenAI API í‚¤ ë³´í˜¸ë¥¼ ìœ„í•´ ëª¨ë“  AI í˜¸ì¶œë„ Edge Functionìœ¼ë¡œ ì´ë™í•  ê³„íšì…ë‹ˆë‹¤."

### "RLSë¡œ ì–´ë–»ê²Œ ë°ì´í„°ë¥¼ ë³´í˜¸í•˜ë‚˜ìš”?"
> "**Row Level Security**ëŠ” SQL ë ˆë²¨ì—ì„œ ë°ì´í„° ì ‘ê·¼ì„ ì œì–´í•©ë‹ˆë‹¤. `auth.uid() = user_id` ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ì¡°íšŒ/ìˆ˜ì •í•  ìˆ˜ ìˆê³ , ê³µê°œ ë…¸ë“œëŠ” `is_public = true` ì¡°ê±´ìœ¼ë¡œ ì¶”ê°€ ì ‘ê·¼ì„ í—ˆìš©í•©ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ì•„ë‹Œ **ë°ì´í„°ë² ì´ìŠ¤ ë ˆë²¨ ë³´ì•ˆ**ì´ë¼ ë” ì•ˆì „í•©ë‹ˆë‹¤."

---

**ë‹¤ìŒ ë¬¸ì„œ**: [03. AI êµ¬í˜„ ìƒì„¸](./03_AI_êµ¬í˜„_ìƒì„¸.md)
**ì´ì „ ë¬¸ì„œ**: [01. í”„ë¡œì íŠ¸ ê°œìš”](./01_í”„ë¡œì íŠ¸_ê°œìš”.md)
